2025-10-09 13:12:27 - INFO - _setup_debug_logging:119 - ================================================================================
2025-10-09 13:12:27 - INFO - _setup_debug_logging:120 - DEBUG LOGGING INITIALIZED
2025-10-09 13:12:27 - INFO - _setup_debug_logging:121 - Log file: validation_output/results/local_test/section_7_6_rl_performance/debug.log
2025-10-09 13:12:27 - INFO - _setup_debug_logging:122 - Quick test mode: True
2025-10-09 13:12:27 - INFO - _setup_debug_logging:123 - ================================================================================
2025-10-09 13:12:27 - INFO - train_rl_agent:436 - ================================================================================
2025-10-09 13:12:27 - INFO - train_rl_agent:437 - Starting train_rl_agent for scenario: traffic_light_control
2025-10-09 13:12:27 - INFO - train_rl_agent:438 -   - Device: gpu
2025-10-09 13:12:27 - INFO - train_rl_agent:439 -   - Total timesteps: 100
2025-10-09 13:12:27 - INFO - train_rl_agent:440 -   - Episode max time: 120.0s
2025-10-09 13:12:27 - INFO - train_rl_agent:441 -   - Checkpoint frequency: 50
2025-10-09 13:12:27 - INFO - train_rl_agent:442 - ================================================================================
2025-10-09 13:14:04 - INFO - run_performance_comparison:573 - ================================================================================
2025-10-09 13:14:04 - INFO - run_performance_comparison:574 - Starting run_performance_comparison for scenario: traffic_light_control
2025-10-09 13:14:04 - INFO - run_performance_comparison:575 - Device: gpu
2025-10-09 13:14:04 - INFO - run_performance_comparison:576 - ================================================================================
2025-10-09 13:14:04 - INFO - run_performance_comparison:577 - ================================================================================
2025-10-09 13:14:04 - INFO - run_performance_comparison:578 - Starting run_performance_comparison for scenario: traffic_light_control
2025-10-09 13:14:04 - INFO - run_performance_comparison:579 - Device: gpu
2025-10-09 13:14:04 - INFO - run_performance_comparison:580 - ================================================================================
2025-10-09 13:14:04 - INFO - run_control_simulation:229 - Starting run_control_simulation:
2025-10-09 13:14:04 - INFO - run_control_simulation:230 -   - scenario_path: validation_output/results/local_test/section_7_6_rl_performance/data/scenarios/traffic_light_control.yml
2025-10-09 13:14:04 - INFO - run_control_simulation:231 -   - duration: 600.0s
2025-10-09 13:14:04 - INFO - run_control_simulation:232 -   - control_interval: 60.0s
2025-10-09 13:14:04 - INFO - run_control_simulation:233 -   - device: gpu
2025-10-09 13:14:04 - INFO - run_control_simulation:238 - Creating TrafficSignalEnvDirect instance...
2025-10-09 13:14:04 - INFO - run_control_simulation:248 - TrafficSignalEnvDirect created successfully
2025-10-09 13:14:04 - INFO - run_control_simulation:264 - Calling env.reset()...
2025-10-09 13:14:04 - INFO - run_control_simulation:266 - env.reset() successful - obs shape: (26,), info: {'episode_step': 0, 'simulation_time': 0.0, 'current_phase': 0}
2025-10-09 13:14:04 - INFO - run_control_simulation:281 - Starting simulation loop - max duration: 600.0s
2025-10-09 13:14:04 - DEBUG - run_control_simulation:291 - Step 0: action=1.0, t=0.0s
2025-10-09 13:14:05 - DEBUG - run_control_simulation:302 - Step 1: reward=-0.06, terminated=False, truncated=False
2025-10-09 13:14:05 - DEBUG - run_control_simulation:291 - Step 1: action=1.0, t=60.0s
2025-10-09 13:14:06 - DEBUG - run_control_simulation:302 - Step 2: reward=-0.06, terminated=False, truncated=False
2025-10-09 13:14:06 - DEBUG - run_control_simulation:291 - Step 2: action=1.0, t=120.0s
2025-10-09 13:14:07 - DEBUG - run_control_simulation:302 - Step 3: reward=-0.06, terminated=False, truncated=False
2025-10-09 13:14:07 - DEBUG - run_control_simulation:291 - Step 3: action=1.0, t=180.0s
2025-10-09 13:14:07 - DEBUG - run_control_simulation:302 - Step 4: reward=-0.06, terminated=False, truncated=False
2025-10-09 13:14:07 - DEBUG - run_control_simulation:291 - Step 4: action=1.0, t=240.0s
2025-10-09 13:14:08 - DEBUG - run_control_simulation:302 - Step 5: reward=-0.06, terminated=False, truncated=False
2025-10-09 13:14:08 - DEBUG - run_control_simulation:291 - Step 5: action=1.0, t=300.0s
2025-10-09 13:14:09 - DEBUG - run_control_simulation:302 - Step 6: reward=-0.06, terminated=False, truncated=False
2025-10-09 13:14:09 - DEBUG - run_control_simulation:291 - Step 6: action=1.0, t=360.0s
2025-10-09 13:14:10 - DEBUG - run_control_simulation:302 - Step 7: reward=-0.06, terminated=False, truncated=False
2025-10-09 13:14:10 - DEBUG - run_control_simulation:291 - Step 7: action=1.0, t=420.0s
2025-10-09 13:14:11 - DEBUG - run_control_simulation:302 - Step 8: reward=-0.06, terminated=False, truncated=False
2025-10-09 13:14:11 - DEBUG - run_control_simulation:291 - Step 8: action=1.0, t=480.0s
2025-10-09 13:14:12 - DEBUG - run_control_simulation:302 - Step 9: reward=-0.06, terminated=False, truncated=False
2025-10-09 13:14:12 - DEBUG - run_control_simulation:291 - Step 9: action=1.0, t=540.0s
2025-10-09 13:14:13 - DEBUG - run_control_simulation:302 - Step 10: reward=-0.06, terminated=False, truncated=True
2025-10-09 13:14:13 - INFO - run_control_simulation:339 - 
  [PERFORMANCE] Simulation completed:
    - Total steps: 10
    - Total reward: -0.60
    - Avg step time: 0.916s (device=gpu)
    - Simulated time: 600.0s
    - Wallclock time: 9.2s
    - Speed ratio: 65.47x real-time

2025-10-09 13:14:13 - INFO - run_control_simulation:340 - Returning 10 state snapshots
2025-10-09 13:14:13 - INFO - evaluate_traffic_performance:351 - Evaluating performance with 10 state snapshots
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 0: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 1: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 2: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 3: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 4: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 5: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 6: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 7: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 8: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - DEBUG - evaluate_traffic_performance:356 - State 9: shape=(4, 204), dtype=float64
2025-10-09 13:14:13 - INFO - evaluate_traffic_performance:410 - Calculated metrics: flow=36.103628, efficiency=5.776581, delay=-179.85s
2025-10-09 13:14:13 - INFO - run_control_simulation:229 - Starting run_control_simulation:
2025-10-09 13:14:13 - INFO - run_control_simulation:230 -   - scenario_path: validation_output/results/local_test/section_7_6_rl_performance/data/scenarios/traffic_light_control.yml
2025-10-09 13:14:13 - INFO - run_control_simulation:231 -   - duration: 600.0s
2025-10-09 13:14:13 - INFO - run_control_simulation:232 -   - control_interval: 60.0s
2025-10-09 13:14:13 - INFO - run_control_simulation:233 -   - device: gpu
2025-10-09 13:14:13 - INFO - run_control_simulation:238 - Creating TrafficSignalEnvDirect instance...
2025-10-09 13:14:13 - INFO - run_control_simulation:248 - TrafficSignalEnvDirect created successfully
2025-10-09 13:14:13 - INFO - run_control_simulation:264 - Calling env.reset()...
2025-10-09 13:14:13 - INFO - run_control_simulation:266 - env.reset() successful - obs shape: (26,), info: {'episode_step': 0, 'simulation_time': 0.0, 'current_phase': 0}
2025-10-09 13:14:13 - INFO - run_control_simulation:281 - Starting simulation loop - max duration: 600.0s
2025-10-09 13:14:13 - DEBUG - run_control_simulation:291 - Step 0: action=0.0, t=0.0s
2025-10-09 13:14:14 - DEBUG - run_control_simulation:302 - Step 1: reward=0.04, terminated=False, truncated=False
2025-10-09 13:14:14 - DEBUG - run_control_simulation:291 - Step 1: action=0.0, t=60.0s
2025-10-09 13:14:15 - DEBUG - run_control_simulation:302 - Step 2: reward=0.04, terminated=False, truncated=False
2025-10-09 13:14:15 - DEBUG - run_control_simulation:291 - Step 2: action=0.0, t=120.0s
2025-10-09 13:14:16 - DEBUG - run_control_simulation:302 - Step 3: reward=0.04, terminated=False, truncated=False
2025-10-09 13:14:16 - DEBUG - run_control_simulation:291 - Step 3: action=0.0, t=180.0s
2025-10-09 13:14:17 - DEBUG - run_control_simulation:302 - Step 4: reward=0.04, terminated=False, truncated=False
2025-10-09 13:14:17 - DEBUG - run_control_simulation:291 - Step 4: action=0.0, t=240.0s
2025-10-09 13:14:18 - DEBUG - run_control_simulation:302 - Step 5: reward=0.04, terminated=False, truncated=False
2025-10-09 13:14:18 - DEBUG - run_control_simulation:291 - Step 5: action=0.0, t=300.0s
2025-10-09 13:14:18 - DEBUG - run_control_simulation:302 - Step 6: reward=0.04, terminated=False, truncated=False
2025-10-09 13:14:18 - DEBUG - run_control_simulation:291 - Step 6: action=0.0, t=360.0s
2025-10-09 13:14:19 - DEBUG - run_control_simulation:302 - Step 7: reward=0.04, terminated=False, truncated=False
2025-10-09 13:14:19 - DEBUG - run_control_simulation:291 - Step 7: action=0.0, t=420.0s
2025-10-09 13:14:20 - DEBUG - run_control_simulation:302 - Step 8: reward=0.04, terminated=False, truncated=False
2025-10-09 13:14:20 - DEBUG - run_control_simulation:291 - Step 8: action=0.0, t=480.0s
2025-10-09 13:14:21 - DEBUG - run_control_simulation:302 - Step 9: reward=0.04, terminated=False, truncated=False
2025-10-09 13:14:21 - DEBUG - run_control_simulation:291 - Step 9: action=0.0, t=540.0s
2025-10-09 13:14:22 - DEBUG - run_control_simulation:302 - Step 10: reward=0.04, terminated=False, truncated=True
2025-10-09 13:14:22 - INFO - run_control_simulation:339 - 
  [PERFORMANCE] Simulation completed:
    - Total steps: 10
    - Total reward: 0.40
    - Avg step time: 0.869s (device=gpu)
    - Simulated time: 600.0s
    - Wallclock time: 8.7s
    - Speed ratio: 69.08x real-time

2025-10-09 13:14:22 - INFO - run_control_simulation:340 - Returning 10 state snapshots
2025-10-09 13:14:22 - INFO - evaluate_traffic_performance:351 - Evaluating performance with 10 state snapshots
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 0: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 1: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 2: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 3: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 4: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 5: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 6: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 7: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 8: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - DEBUG - evaluate_traffic_performance:356 - State 9: shape=(4, 204), dtype=float64
2025-10-09 13:14:22 - INFO - evaluate_traffic_performance:410 - Calculated metrics: flow=36.103628, efficiency=5.776581, delay=-179.85s
2025-10-09 13:14:22 - INFO - run_performance_comparison:628 - Baseline performance: {'total_flow': 36.103628321053236, 'avg_speed': 678553.8271062116, 'avg_density': 5.369890500022292e-05, 'efficiency': 5.776580531368519, 'delay': -179.8487464957266, 'throughput': 180518.14160526617}
2025-10-09 13:14:22 - INFO - run_performance_comparison:629 - RL performance: {'total_flow': 36.103628321053236, 'avg_speed': 678553.8271062116, 'avg_density': 5.369890500022292e-05, 'efficiency': 5.776580531368519, 'delay': -179.8487464957266, 'throughput': 180518.14160526617}
2025-10-09 13:14:22 - INFO - run_performance_comparison:637 - Flow improvement: 0.000%
2025-10-09 13:14:22 - INFO - run_performance_comparison:638 - Efficiency improvement: 0.000%
2025-10-09 13:14:22 - INFO - run_performance_comparison:639 - Delay reduction: -0.000%
